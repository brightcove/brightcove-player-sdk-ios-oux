<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>BCOVOUX Reference</title>

	<link rel="stylesheet" href="css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="index.html">BCOVOUX </a>
			</h1>

			<p id="developer-home">
				<a href="index.html">Brightcove</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="hierarchy.html">Hierarchy</a></li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview-contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">BCOVOUX Reference</h1>

					
					<div class="section section-overview index-overview">
						
						
						<h1>Brightcove OnceUX Plugin for Brightcove Player SDK for iOS, version 2.1.0.227</h1>

<h1>Supported Platforms</h1>

<p>iOS 7.0 and above.</p>

<h1>Installation</h1>

<p>The Brightcove OnceUX for Brightcove Player SDK provides two installation packages for iOS, a static library framework and a dynamic framework. The static library target supports deployment on iOS 7 while the dynamic framework only supports iOS 8 and above.</p>

<h2>CocoaPods</h2>

<p>You can use <a href="http://cocoapods.org">Cocoapods</a> to add the OUX Plugin for Brightcove Player SDK to your project.  You can find the latest <code>Brightcove-Player-SDK-OUX</code> podspec <a href="https://github.com/CocoaPods/Specs/tree/master/Specs/Brightcove-Player-SDK-OUX">here</a>.</p>

<p>Static Framework example:</p>

<pre><code>pod 'Brightcove-Player-SDK-OUX'
</code></pre>

<p>Dynamic Framework example:</p>

<pre><code>pod 'Brightcove-Player-SDK-OUX/dynamic'
</code></pre>

<h2>Manual</h2>

<p>To add the OUX Plugin for Brightcove Player SDK to your project manually:</p>

<ol>
<li>Install the latest version of the <a href="https://github.com/brightcove/brightcove-player-sdk-ios">Brightcove Player SDK</a>.</li>
<li>Download the latest zip'ed release of the BrightcoveOUX plugin from our <a href="https://github.com/brightcove/brightcove-player-sdk-ios-oux/releases">release page</a>.</li>
<li>Add <code>BrightcoveOUX.framework</code> to your project.</li>
<li>On the &ldquo;Build Settings&rdquo; tab of your application target, ensure that the &ldquo;Framework Search Paths&rdquo; include the path to the framework. This should have been done automatically unless the framework is stored under a different root directory than your project.</li>
<li>(Dynamic Framework only) On the &ldquo;General&rdquo; tab of your application target, add &lsquo;BrightcoveOUX.framework&rsquo; to the &ldquo;Embedded Binary&rdquo; section.</li>
<li>(Dynamic Framework only) On the &ldquo;Build Phases&rdquo; tab, add a &ldquo;Run Script&rdquo; phase with the command <code>bash ${BUILT_PRODUCTS_DIR}/${FRAMEWORKS_FOLDER_PATH}/BrightcoveOUX.framework/strip-frameworks.sh</code>. Check &ldquo;Run script only when installing&rdquo;. This will remove unneeded architectures from the build, which is important for App Store submission. ([rdar://19209161][19209161])</li>
<li>(Static Framework only) On the &ldquo;Build Settings&rdquo; tab of your application target, add <code>-ObjC</code> to the &ldquo;Other Linker Flags&rdquo; build setting.</li>
</ol>


<h2>Imports</h2>

<p>The OUX Plugin for Brightcove Player SDK for iOS can be imported into code a few different ways; <code>@import BrightcoveOUX;</code>, <code>#import &lt;BrightcoveOUX/BrightcoveOUX.h&gt;</code> or <code>#import &lt;BrightcoveOUX/[specific class].h&gt;</code>.</p>

<h1>Quick Start</h1>

<p>BrightcoveOUX is a plugin for <a href="https://github.com/brightcove/brightcove-player-sdk-ios">Brightcove Player SDK for iOS</a> that provides support for Brightcove OnceUX server side ad stitching. Its use is relatively straightforward.</p>

<pre><code>[1] BCOVOUXAdComponentDisplayContainer *displayContainer = [[BCOVOUXAdComponentDisplayContainer alloc] initWithAdComponentContainer:self.videoContainer companionSlots:nil];

    BCOVPlayerSDKManager *manager = [BCOVPlayerSDKManager sharedManager];
[2] id&lt;BCOVPlaybackController&gt; controller = [manager createOUXPlaybackControllerWithViewStrategy:[manager BCOVOUXdefaultControlsViewStrategy]];
    controller.delegate = self;
[3] [controller addSessionConsumer:displayContainer];

[4] [self.videoContainer addSubview:controller.view];

[5] BCOVVideo *video = [BCOVVideo videoWithURL:[NSURL URLWithString:&lt;url-to-once-ux-video&gt;]];
[6] [controller setVideos:@[ video ]];
    [controller play];
</code></pre>

<p>Let&rsquo;s break this code down into steps, to make it a bit simpler to digest:</p>

<ol>
<li>First you will want to create an BCOVOUXAdComponentDisplayContainer. This object will provide the ad UI and help manage any companion slots. Pass in the view you want the ad UI to show up in and any companion slots that you have, if any.</li>
<li>BCOVOUX adds some category methods to BCOVPlaybackManager. The first of these is <code>-createOUXPlaybackControllerWithViewStrategy:</code>. Use this method to create your playback controller.</li>
<li>In order for the BCOVOUXAdComponentDisplayContainer to display ad information and populate companion ad views, it must be added as a session consumer.</li>
<li>Add the playback controller&rsquo;s view to your video container. This will probably be the same view you used in step 1.</li>
<li>Create a BCOVVideo using the URL to your OnceUX VMAP document.</li>
<li>Load the video into the playback controller.</li>
</ol>


<p>If you have questions or need help, we have a support forum for Brightcove&rsquo;s native Player SDKs at <a href="https://groups.google.com/forum/#!forum/brightcove-native-player-sdks">[https://groups.google.com/forum/](https://groups.google.com/forum/)#!forum/brightcove-native-player-sdks</a> .</p>

<h1>Obtaining Ad playback Information</h1>

<p>BrightcoveOUX provides ad playback information via the <code>BCOVPlaybackControllerAdsDelegate</code>. For example, if you want to hide your controls during an ad, you could implement <code>[BCOVPlaybackControllerAdsDelegate playbackController:playbackSession:didEnterAdSequence:]</code> to hide them.</p>

<p>For more information on how to use these delegate methods, please see <a href="https://github.com/brightcove/brightcove-player-sdk-ios">Brightcove Player SDK for iOS</a>.</p>

<h1>Seeking</h1>

<p>The BrightcoveOUX plugin provides a seeking function that should be used when implementing controls. This seek function is exposed on the session through the <code>providerExtension</code> property. Here is how it is used:</p>

<pre><code>CMTime contentTimeToSeekTo = &lt;calculation-from-scrub-bar&gt;;
[self.currentSession.providerExtension oux_seekToTime:contentTimeToSeekTo completionHandler:^(BOOL finished) {

    if (finished)
    {
        [self.currentSession.player play];
    }

}];
</code></pre>

<p>The <code>completionHandler</code> will execute at the completion of a successful seek. It will not execute if a seek was already initiated by a previous call to <code>[BCOVSessionProviderExtension oux_seekToTime:completionHandler:]</code> or if an ad is playing back. To test whether a see attempt can be made, check the <code>[BCOVSessionProviderExtension oux_canSeek]</code> property. For more information on both of these methods, be sure to read their <a href="https://github.com/brightcove/brightcove-player-sdk-ios-oux/blob/master/ios/static/BrightcoveOUX.framework/Headers/BCOVOUXComponent.h">headerdoc</a>.</p>

<h1>Seeking With Ads Disabled</h1>

<p>The BrightcovePlayerSDK provides a BOOL property for disabling ads while seeking. The intended use by OnceUX is to allow an application to resume video playback after relaunching without requiring the end-user to view ads they&rsquo;ve already seen.</p>

<p>It is recommended that ad-disabling logic be added to the <code>kBCOVPlaybackSessionLifecycleEventReady</code> handler of the <code>-playbackController:playbackSession:didReceiveLifecycleEvent:</code> method of your <code>BCOVPlaybackController</code> delegate.</p>

<pre><code>if ([kBCOVPlaybackSessionLifecycleEventReady isEqualToString:lifecycleEvent.eventType])
{
    // disable ads.
    _playbackController.adsDisabled = YES;

    // seek somewhere into the video content.
    [_playbackController seekToTime:resumeTime completionHandler:^(BOOL finished)
    {
        // re-enable ads.
        _playbackController.adsDisabled = NO;

        // open the shutter.
        _playbackController.shutterFadeTime = 0.25;
        _playbackController.shutter = NO;
    }];
}
</code></pre>

<p>When calling <code>[BCOVPlaybackController seekTo:completion:]</code> to resume playback at a particular time, the first frame of the video will be visible until the seek completes. For a cleaner presentation, set the BOOL <code>shutter</code> property of BCOVPlabackController to <code>YES</code> before calling <code>-setVideos:</code>. When seeking is complete, dismiss the shutter by setting the <code>shutter</code> property to <code>NO</code>. The <code>shutterFadeTime</code> property defines the duration of the shutter fade animation.</p>

<pre><code>self.playbackController = [sdkManager createOUXPlaybackControllerWithViewStrategy:[sdkManager BCOVOUXdefaultControlsViewStrategy]];

// resuming playback so activate the shutter before loading video.
self.playbackController.shutterFadeTime = 0.0;
self.playbackController.shutter = YES;

NSArray *videos = @[[self videoWithURL: [NSURL URLWithString:onceUxUrl]]];
[self.playbackController setVideos:videos];
</code></pre>

<h1>Known Issues</h1>

<ul>
<li><p>You cannot use BrightcoveOUX with any other Brightcove plugins except for the BrightcoveFairPlay plugin.</p></li>
<li><p>The plugin currently does not support playing back OnceUX content and non OnceUX content in the same playback controller. If you need to play both, you will need to create a separate playback controller for this content.</p></li>
<li><p>When playing OnceUX content, you may see a message in the log that states &ldquo;No source found with deliveryMethod of HLS or MP4, falling back to the first source.&rdquo;. This message can be ignored and will be addressed in a future update.</p></li>
<li><p>If the request for the OnceUX VMAP document fails to load, in addition to receiving an error event, you may see a message in the log that states &ldquo;Cannot -forwardInvocation: to nonexistent inner playback session.&rdquo;. This message can be ignored and will be addressed in a future update.</p></li>
</ul>

						
						
					</div>
					

					<div class="index-container">
						

						
						<div class="index-column">
							<h2 class="index-title">Class References</h2>
							<ul>
								
								<li><a href="Classes/BCOVOUXAdComponentDisplayContainer.html">BCOVOUXAdComponentDisplayContainer</a></li>
								
								<li><a href="Classes/BCOVOUXCompanionSlot.html">BCOVOUXCompanionSlot</a></li>
								
							</ul>
						</div>
						

						
						<div class="index-column">
							
							<h2 class="index-title">Protocol References</h2>
							<ul>
								
								<li><a href="Protocols/BCOVOUXAdComponentDelegate.html">BCOVOUXAdComponentDelegate</a></li>
								
							</ul>
							

							

							
							<h2 class="index-title">Category References</h2>
							<ul>
								
								<li><a href="Categories/BCOVPlayerSDKManager+BCOVOUXAdditions.html">BCOVPlayerSDKManager(BCOVOUXAdditions)</a></li>
								
								<li><a href="Categories/BCOVSessionProviderExtension+BCOVOUXAdditions.html">BCOVSessionProviderExtension(BCOVOUXAdditions)</a></li>
								
							</ul>
							
						</div>
						
					</div>

					<footer>
						<div class="footer-copyright">
							
							<p class="copyright">Copyright &copy; 2016 Brightcove. All rights reserved. Updated: 2016-06-14</p>
							
							
							<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1334)</a>.</p>
							
						</div>
					</footer>
				</main>
			</div>
		</div>
	</article>

	<script src="js/script.js"></script>
</body>
</html>